# 文件系统


![file system](http://i.imgur.com/duyi5d2.png)

![file system](http://i.imgur.com/FxDlkY1.png)

![file system](http://i.imgur.com/k4o0PhI.png)

* 每个i节点都有一个链接计数，其值是指向该i节点的目录项数。只有当链接计数减少至0时，才可删除该文件。在stat结构中，链接计数包含在`st_nlink`成员中。这种链接类型称为硬链接。`LINK_MAX`指定了硬链接的最大值。
* 另外一种链接称为符号链接(symbolic link)。该文件的实际内容(在数据块中)包含了该符号链接所指向的文件的名字。
* i节点包含了大多数与文件有关的信息：文件类型、文件访问权限位、文件长度和指向该文件所占用的数据块的指针等等。stat结构中的大多数信息都取自i节点。只有两项数据存在目录项中：文件名和i节点编号。
* 每个文件系统各自对它们的i节点进行编号，因此目录项中的i节点编号数指向同一文件系统中的相应i节点，不能使一个目录项指向另一个文件系统的i节点。
* 当在不更换文件系统情况下为一个文件更名时，该文件的实际内容并未移动，只需构造一个指向现有i节点的新目录项，并解除与旧目录项的链接。
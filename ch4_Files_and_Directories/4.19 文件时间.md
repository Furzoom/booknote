# 文件时间

对每个文件维护3个时间字段，如下：

字段|说明|例子|ls(1)选项
---|---|---|---
st_atimespec|文件数据的最后访问时间|read|-u
st_mtimespec|文件数据的最后修改时间|write|默认
st_ctimespec|i节点状态的最后更改时间|chmod, chown|-c

系统不维护对一个i节点的最后一次访问时间。

<table>
<thead>
<tr>
<th rowspan=2>函数</th>
<th colspan=3>引用文件或目录</th>
<th colspan=3>父目录</th>
<th rowspan=2>备注</th>
</tr>
<tr>
<th>a</th>
<th>m</th>
<th>c</th>
<th>a</th>
<th>m</th>
<th>c</th>
</tr>
</thead>
<tbody>
<tr>
<td>chmod, fchmod</td>
<td></td>
<td></td>
<td>Y</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>chown, fchown</td>
<td></td>
<td></td>
<td>Y</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>creat</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td></td>
<td>Y</td>
<td>Y</td>
<td>O_CREAT</td>
</tr>
<tr>
<td>creat</td>
<td></td>
<td>Y</td>
<td>Y</td>
<td></td>
<td>Y</td>
<td>Y</td>
<td>O_TRUNC</td>
</tr>
<tr>
<td>exec</td>
<td>Y</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>lchown</td>
<td></td>
<td></td>
<td>Y</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>link</td>
<td></td>
<td></td>
<td>Y</td>
<td></td>
<td>Y</td>
<td>Y</td>
<td>第二个参数的父目录</td>
</tr>
<tr>
<td>mkdir</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td></td>
<td>Y</td>
<td>Y</td>
<td></td>
</tr>
<tr>
<td>mkfifo</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td></td>
<td>Y</td>
<td>Y</td>
<td></td>
</tr>
<tr>
<td>open</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td></td>
<td>Y</td>
<td>Y</td>
<td>O_CREAT</td>
</tr>
<tr>
<td>open</td>
<td></td>
<td>Y</td>
<td>Y</td>
<td></td>
<td></td>
<td></td>
<td>O_TRUNC</td>
</tr>
<tr>
<td>pipe</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>read</td>
<td>Y</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>remove</td>
<td></td>
<td></td>
<td>Y</td>
<td></td>
<td>Y</td>
<td>Y</td>
<td>删除文件=unlink</td>
</tr>
<tr>
<td>remove</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>Y</td>
<td>Y</td>
<td>删除目录=rmdir</td>
</tr>
<tr>
<td>rename</td>
<td></td>
<td></td>
<td>Y</td>
<td></td>
<td>Y</td>
<td>Y</td>
<td>对两个参数</td>
</tr>
<tr>
<td>rmdir</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>Y</td>
<td>Y</td>
<td></td>
</tr>
<tr>
<td>truncate, ftruncate</td>
<td></td>
<td>Y</td>
<td>Y</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>unlink</td>
<td></td>
<td></td>
<td>Y</td>
<td></td>
<td>Y</td>
<td>Y</td>
<td></td>
</tr>
<tr>
<td>utimes, utimensat</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>futimens</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>write</td>
<td></td>
<td>Y</td>
<td>Y</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

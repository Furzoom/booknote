# 创建和读取符号链接

```c
#include <unistd.h>
int symlink(const char *actualpath, const char *sympath);
int symlinkat(const char *actualpaht, int fd, const char *sympath);
```

* 成功返回0，出错返回-1。

函数创建一个指向actualpath的新目录项sympath。在创建此符号链接时，并不要求actualpath已经存在。并且两者不需要位于同一文件系统中。

symlinkat与symlink类似，但sympath参数根据相对于打开文件描述符引用的目录(由fd参数指定)进行计算。如果sympath参数指定的是绝对路径或者fd参数设置了`AT_FDCWD`标志，那么symlinkat与symlink作用相同。

由于open函数跟随符号链接，所以需要有一种方法打开链接本身，并读取链接中的名字。

```c
#include <unistd.h>
ssize_t readlink(const char *restrict pathname, char *restrict buf, size_t bufsize);
ssize_t readlinkat(int fd, const char *restrict pathname, char *restrict buf, size_t bufsize);
```

* 成功返回读取的字节数，出错返回-1。

这两个函数组合了open、read、close的所有操作。如果函数成功执行，返回读入buf的字节数。在buf中返回的符号链接的内容不以null字节终止。

当pathname参数指定的是绝对路径名或者fd参数的值为`AT_FDCWD`，readlinkat函数和readlink作用相同。如果fd参数是一个打开目录的文件描述符并且pathname参数是相对路径名，则readlinkat计算相对于由fd代表的打开目录的路径名。
